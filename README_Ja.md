# Ray_gun　-A Arduino Program to play sound by Arduino's self

## 概要
このプログラムはArduinoを使ってLチカと音声再生をするプログラムです。 </br>
Arduino単独でシールドなどは使わずにできます。<br>
Arduino UnoとNANOで動作確認済みです。</br>
当方では光線銃として実際に使いました。クイズのボタンなんかにも応用できるかも<br>
Issueとかは立ててもらって構わないですが、対応があるかは分かりません。<br> 
使えなくても自己責任で。


## 使い方と仕様</br>
Lチカの仕方とか、音声編集とか基本的なところについては解説しません。各自検索してください。ここではつまずきそうなところについて解説します。


### 音の変換の仕方
このプログラムでは音をC言語の配列に直す必要があります。しかし、普通の音声ファイルはMP3とかm4aなので、そのままでは使えません。</br>
あくまでも一例ですが、音を変換する方法を書きます。

1. Audacityで普通の音声ファイルを開く
2. 左下の「プロジェクトのサンプリング周波数」を8000とか16000にする。（ここの値とコピペ先のビットレート（元プログラムだと16000となっているところ）を合わせる。）
3. 書き出しで「その他の非圧縮ファイル」を選択し、ヘッダを "RAW" エンコーディングを"Unsigned 8-bit PCM" で出力する。
4. ターミナルを開き、xxdコマンドで配列を出力する。
5. コピペ


### 仕様と注意点
原理としては高速PWMでPCMを再生する感じです。8bitだし、arduinoのメモリも32KBとかなので、音質と使える音の長さは期待しないでください。効果音くらいにしか使えないです。普通のピンから出力しているので、出力もそんなには強くないです。オペアンプとか入れてもいいかも。</br>
 あと、動作の順序は
 ` ` ` LEDが光る=>音声が流れる=>LEDが消える ` ` `
 です。 LEDの点灯時間は基本的に音声の流れる時間に依存します。

 ##　当方の開発環境
 - Ubuntu 18.04 64bit
 - ArduinoIDE 1.8.5










